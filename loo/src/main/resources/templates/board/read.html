<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
	<meta name="author" content="AdminKit">
	<meta name="keywords" content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="shortcut icon" href="/img/icons/favicon-16x16.png" />

	<link rel="canonical" href="https://demo-basic.adminkit.io/" />

	<title>글 작성</title>

	<link href="/css/app.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
	<div class="wrapper">
		<nav id="sidebar" class="sidebar js-sidebar">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="/">
					<img src="/img/icons/Loo_Letter_white.png" style="height: 30px; padding: 2px; margin-bottom: 0px;" alt="logo" />
        		</a>
				<ul class="sidebar-nav">
					<li class="sidebar-header">
						My Pages
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" href="/">
              <i class="align-middle" data-feather="home"></i> <span class="align-middle">홈</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/users/update">
              <i class="align-middle" data-feather="user"></i> <span class="align-middle">내 정보</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/users/logout">
              <i class="align-middle" data-feather="log-out"></i> <span class="align-middle">로그아웃</span>
            </a>
					</li>

					<li class="sidebar-header">
						My Schedule
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="calendar"></i> <span class="align-middle">일정</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="check-square"></i> <span class="align-middle">근태관리</span>
            </a>
					</li>

					<li class="sidebar-header">
						Community
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" th:href="@{/board/list(board_category=${T(com.example.loo.model.board.BoardCategory).NOTICE})}">
              <i class="align-middle" data-feather="bell"></i> <span class="align-middle">공지사항</span>
            			</a>
					</li>
					
					<li class="sidebar-item">
						<a class="sidebar-link" th:href="@{/board/list(board_category=${T(com.example.loo.model.board.BoardCategory).FREE})}">
              <i class="align-middle" data-feather="clipboard"></i> <span class="align-middle">자유게시판</span>
            </a>
					</li>
					
					<li class="sidebar-item">
						<a class="sidebar-link" th:href="@{/board/list(board_category=${T(com.example.loo.model.board.BoardCategory).CLUB})}">
              <i class="align-middle" data-feather="coffee"></i> <span class="align-middle">동호회</span>
            </a>
					</li>
					
					<li class="sidebar-header">
						Life
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="map"></i> <span class="align-middle">맛집</span>
            </a>
					</li>
					
					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="sun"></i> <span class="align-middle">날씨</span>
            </a>
					</li>
				</ul>

			</div>
		</nav>

		<div class="main">
			<nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle js-sidebar-toggle">
          <i class="hamburger align-self-center"></i>
        </a>

				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">
						<li class="nav-item dropdown">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-bs-toggle="dropdown">
                				<i class="align-middle" data-feather="settings"></i>
              				</a>
							<!-- 회원이름 표시 -->
							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">
                				<img src="/img/avatars/profile.png" class="avatar img-fluid rounded me-1" alt="basic" />
               					<span class="text-dark">[[${session.loginMember.member_name}]]</span>
              				</a>
              				<!-- 드롭다운 내 메뉴 -->
							<div class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" href="/users/update"><i class="align-middle me-1" data-feather="user"></i> 내 정보</a>
								<a class="dropdown-item" href="#"><i class="align-middle me-1" data-feather="check-square"></i> 근태관리</a>
								<!-- 드롭다운 메뉴 구분선 -->
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="/users/logout"><i class="align-middle me-1" data-feather="log-out"></i> 로그아웃</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>
			<main class="content">
				<div class="container-fluid p-0">
					<div class="card">
						<div class="card-body">
							<div class="row">
								<table class="table" th:object="${board}">
									<tbody>
										<tr>
									    	<th class="text-center">제목</th>
									        <td th:text="*{board_title}"></td>
									    </tr>
									    <tr>
									        <th class="text-center">작성일</th>
									        <td th:text="${#temporals.format(board.create_time, 'yyyy-MM-dd HH:mm')}"></td>
									    </tr>
									    <tr>
									        <th class="text-center">수정일</th>
									        <td th:text="${#temporals.format(board.edit_time, 'yyyy-MM-dd HH:mm')}"></td>
									    </tr>
									    <tr>
									        <th class="text-center">작성자</th>
									        <td th:text="*{member_name}"></td>
									    </tr>
									    <tr>
									        <th class="text-center">조회수</th>
									        <td th:text="*{hit}"></td>
									    </tr>
									    <tr>
									        <th class="text-center">내용</th>
									        <td>
												<textarea rows="10" class="form-control" th:text="*{board_contents}" readonly></textarea>
											</td>
									    </tr>
									</tbody>
    							</table>
    							<input type="hidden" th:field="*{board_category}">
								<div class="text-center">
								    <a th:href="@{/board/list(board_category=${board_category})}" class="btn btn-primary btn-sm">목록으로</a>
								    <th:block >
								    	<input type="button" class="btn btn-primary btn-sm" th:onclick="|location.href='/board/update?board_id=${board.board_id}'|" value="수정하기">
								        <input type="button" class="btn btn-primary btn-sm" th:onclick="|location.href='/board/delete?board_id=${board.board_id}'|" value="삭제하기">
								    </th:block>
								    <hr />
								</div>
								<div class="col-12">
									<div class="card">
										<div class="card-header">
											<h5 class="card-title mb-0">댓글</h5>
										</div>
										<div class="card-body">
											<div class="d-flex align-items-start" th:unless="${param.comment_id}">
												<div class="flex-grow-1">
													<form action="writeComment" method="post" th:object="${newComment}">
														<input type="hidden" th:field="${board.board_id}">
														<textarea rows="2" class="form-control" th:field="*{comment_contents}" placeholder="댓글을 입력하세요."></textarea>
														<input type="submit" class="float-end btn btn-primary btn-sm" value="댓글 작성" style="margin-top: 10px;">
													</form>
												</div>
											</div>
											<!-- 수정버튼클릭 시 작성창에서 수정창으로 변경 -->
											<div class="d-flex align-items-start" th:if="${param.comment_id}">
												<div class="flex-grow-1">
													<form action="updateComment" method="post" th:object="${updateComment}">
														<input type="hidden" th:field="*{comment_id}">
														<textarea rows="2" class="form-control" th:field="*{comment_contents}"></textarea>
														<input type="submit" class="float-end btn btn-primary btn-sm" value="댓글 수정" style="margin-top: 10px;">
													</form>
												</div>
											</div>
											<div class="d-flex align-items-start" th:each="comments : ${comments}">
												<div class="flex-grow-1">
													<hr />
													<th:block th:text="${comments.comment_contents}"></th:block>
													<small class="text-muted" th:text="'- ' + ${comments.member_name}"></small><br />
													<small class="float-end text-navy" th:text="'작성일 : ' + ${#temporals.format(comments.comment_create_time, 'yyyy-MM-dd HH:mm')}"></small><br />
													<small th:if="${comments.comment_edit_time != null}" class="float-end text-navy" th:text="'수정일 : ' + ${#temporals.format(comments.comment_edit_time, 'yyyy-MM-dd HH:mm')}"></small><br />
													<th:block th:if="${session.loginMember.member_mail == comments.member_mail}">
														<a th:onclick="|location.href='/board/deleteComment?comment_id=${comments.comment_id}'|"><i class="float-end feather-sm" data-feather="trash-2" style="margin-left: 5px;"></i></a>
														<a th:onclick="|location.href='/board/updateComment?comment_id=${comments.comment_id}'|"><i class="float-end feather-sm" data-feather="edit-3"></i></a>
													</th:block>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>

	<script src="/js/app.js"></script>

</body>

</html>