<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Responsive Admin &amp; Dashboard Template based on Bootstrap 5">
	<meta name="author" content="AdminKit">
	<meta name="keywords" content="adminkit, bootstrap, bootstrap 5, admin, dashboard, template, responsive, css, sass, html, theme, front-end, ui kit, web">

	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="shortcut icon" href="/img/icons/favicon-16x16.png"/>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<link rel="canonical" href="https://demo-basic.adminkit.io/" />

	<title>홈</title>

	<link href="/css/app.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
	<script>
$(document).ready(function () {
    $("#comcheck").click(function () {
        Swal.fire({
            title: '출근하시겠습니까?',
            text: "다시 되돌릴 수 없습니다. 신중하세요.",
            icon: 'success',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '출근 ',
            cancelButtonText: '취소'
        }).then((result) => {
            if (result.isConfirmed) {
                const url = "/commute/attendance";
                $.ajax({
                    url: url,
                    type: "POST",
                    success: function (result) {
                        Swal.fire(
                            '출근 되었습니다.',
                            '오늘 하루도 화이팅하세요'
                        ).then(() => {
                            // 출근 요청 성공 후에 페이지 새로고침
                            location.reload();
                        });
                    },
                    error: function (error) {
                        console.log('Error ${error}')
                    }
                });
            }
        });
    });
});
</script>


	<script>
		$().ready(function () {
   		 $("#comout").click(function () {
        Swal.fire({
            title: '퇴근하시겠습니까?',
            text: "다시 되돌릴 수 없습니다. 신중하세요.",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '퇴근 ',
            cancelButtonText: '취소'
        }).then((result) => {
			
            if (result.isConfirmed) {
				const url = "/commute/leave";
        $.ajax({
			url : url,
			type : "POST",
			success : function(result){
				console.log(result)
			}, 
			error : function(error){
				console.log('Error ${error}')
			}
		})
                Swal.fire(
                    '퇴근 되었습니다.',
                    '오늘 하루도 수고하셨습니다',
                )
            }
        })
        
    });
});
	</script>
	
</head>

<body>
	<div class="wrapper">
		<!-- 사이드 메뉴 -->
		<!-- 로그아웃 시 메뉴 -->
		<nav id="sidebar" class="sidebar js-sidebar" th:unless="${session.loginMember}">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="/">
					<img src="/img/icons/Loo_Letter_white.png" style="height: 30px; padding: 2px;" alt="logo" />
        		</a>
				<ul class="sidebar-nav">
					<li class="sidebar-header">
						Life Of Office
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" href="/">
              <i class="align-middle" data-feather="home"></i> <span class="align-middle">홈</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/users/login">
              <i class="align-middle" data-feather="log-in"></i> <span class="align-middle">로그인</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/users/signup">
              <i class="align-middle" data-feather="user-plus"></i> <span class="align-middle">회원가입</span>
            </a>
					</li>
				</ul>
			</div>
		</nav>
		<!-- 로그인 시 메뉴 -->
		<nav id="sidebar" class="sidebar js-sidebar" th:if="${session.loginMember}">
			<div class="sidebar-content js-simplebar">
				<a class="sidebar-brand" href="/">
					<img src="/img/icons/Loo_Letter_white.png" style="height: 30px; padding: 2px; margin-bottom: 0px;" alt="logo" />
        		</a>
				<ul class="sidebar-nav">
					<li class="sidebar-header">
						My Pages
					</li>

					<li class="sidebar-item active">
						<a class="sidebar-link" href="/">
              <i class="align-middle" data-feather="home"></i> <span class="align-middle">홈</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/users/update">
              <i class="align-middle" data-feather="user"></i> <span class="align-middle">내 정보</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="/users/logout">
              <i class="align-middle" data-feather="log-out"></i> <span class="align-middle">로그아웃</span>
            </a>
					</li>

					<li class="sidebar-header">
						My Schedule
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="calendar"></i> <span class="align-middle">일정</span>
            </a>
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" th:href="@{/commute/list(member_mail=${session.loginMember.member_mail})}">
             		 <i class="align-middle" data-feather="check-square"></i> <span class="align-middle">근태관리</span>
            		</a>
					</li>

					<li class="sidebar-header">
						Community
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="bell"></i> <span class="align-middle">공지사항</span>
            </a>
					</li>
					
					<li class="sidebar-item">
						<a class="sidebar-link" href="board/list">
              <i class="align-middle" data-feather="clipboard"></i> <span class="align-middle">자유게시판</span>
            </a>
					</li>
					
					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="coffee"></i> <span class="align-middle">동호회</span>
            </a>
					</li>
					
					<li class="sidebar-header">
						Life
					</li>

					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="map"></i> <span class="align-middle">맛집</span>
            </a>
					</li>
					
					<li class="sidebar-item">
						<a class="sidebar-link" href="#">
              <i class="align-middle" data-feather="sun"></i> <span class="align-middle">날씨</span>
            </a>
					</li>
				</ul>

			</div>
		</nav>

		<div class="main">
		<!-- 드롭다운 메뉴 -->
			<nav class="navbar navbar-expand navbar-light navbar-bg">
				<a class="sidebar-toggle js-sidebar-toggle">
          			<i class="hamburger align-self-center"></i>
        		</a>
				<div class="navbar-collapse collapse">
					<ul class="navbar-nav navbar-align">
						<!-- 로그아웃 시 -->
						<li class="nav-item" th:unless="${session.loginMember}">
							<a class="nav-link d-none d-sm-inline-block" href="/users/login">
								<i class="text-dark" data-feather="log-in"></i>
								<span class="text-dark">로그인</span>
              				</a>
							<a class="nav-link d-none d-sm-inline-block" href="/users/signup">
               					<i class="text-dark" data-feather="user-plus"></i>
               					<span class="text-dark">회원가입</span>
              				</a>
						</li>
						<!-- 로그인 시 -->
						<li class="nav-item dropdown" th:if="${session.loginMember}">
							<a class="nav-icon dropdown-toggle d-inline-block d-sm-none" href="#" data-bs-toggle="dropdown">
                				<i class="align-middle" data-feather="settings"></i>
              				</a>
							<!-- 회원이름 표시 -->
							<a class="nav-link dropdown-toggle d-none d-sm-inline-block" href="#" data-bs-toggle="dropdown">
                				<img src="/img/avatars/profile.png" class="avatar img-fluid rounded me-1" alt="basic" />
               					<span class="text-dark">[[${session.loginMember.member_name}]]</span>
              				</a>
              				<!-- 드롭다운 내 메뉴 -->
							<div class="dropdown-menu dropdown-menu-end">
								<a class="dropdown-item" href="pages-profile.html"><i class="align-middle me-1" data-feather="user"></i> 내 정보</a>
								<a class="dropdown-item" th:href="@{/commute/list(member_mail=${session.loginMember.member_mail})}"><i class="align-middle me-1" data-feather="check-square"></i> 근태관리</a>
								<!-- 드롭다운 메뉴 구분선 -->
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" href="/users/logout"><i class="align-middle me-1" data-feather="log-out"></i> 로그아웃</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>
			
			<!-- 화면 중앙 -->
			<main class="content">
				<!-- 로그아웃 시 -->
				<div class="container-fluid p-0" th:unless="${session.loginMember}">

					<h1 class="h3 mb-3">Enjoy <strong>L</strong>ife <strong>O</strong>f <strong>O</strong>ffice</h1>

					<div class="row">
						<div class="col-12 col-md-12 col-xxl-6 d-flex order-3 order-xxl-2">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">일정관리, 동호회, 맛집, 날씨 등 기능 안내</h5>
								</div>
								<div class="card-body px-4">
									<div id="" style="height:350px;"></div>
								</div>
							</div>
						</div>
					</div>
				</div>
				
				<!-- 로그인 시 -->
				<div class="container-fluid p-0" th:if="${session.loginMember}">

					<h1 class="h3 mb-3"><strong>제목</strong> 뭐라고할까요?</h1>

					<div class="row">
						<div class="col-xl-6 col-xxl-5 d-flex">
							<div class="w-100">
									<div class="col-sm-12">
										<div class="card">
											<div class="card-body">
												<div class="row">
													<div class="col mt-0">
														<h5 class="card-title">Commute</h5>
													</div>
												</div>
												<div class=" text-center" th:unless="${session.status}">
													<span th:text="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd HH:mm:ss')}"></span>
													<button class="btn btn-danger btn-lg mr-12" id="comcheck">출근</button>
												</div>
												
												<!--출근하고 나서 퇴근 -->
												<div class=" text-center"  th:if="${session.status}">
													
													<span th:text="${#calendars.format(#calendars.createNow(), 'yyyy-MM-dd HH:mm:ss')}"></span>
													<button class="btn btn-primary btn-lg" id="comout">퇴근</button>													
												</div>
										</div>	
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-12 col-lg-6 col-xxl-3 d-flex">
							<div class="card flex-fill">
								<div class="card-header">

									<h5 class="card-title mb-0">Calendar</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="chart">
											<div id="datetimepicker-dashboard"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-6 col-xxl-9 d-flex">
							<div class="card flex-fill">
								<div class="card-header">

									<h5 class="card-title mb-0">Notice</h5>
								</div>
								<table class="table table-hover my-0">
									<thead>
										<tr>
											<th>No</th>
											<th>제목</th>
											<th>작성자</th>
											<th>작성일</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td></td>
											<td></td>
											<td></td>
											<td></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						
					</div>

				</div>
			</main>
		</div>
	</div>

	<script src="/js/app.js"></script>
	

	
	
	<script>
		document.addEventListener("DOMContentLoaded", function() {
			var date = new Date(Date.now() - 5 * 24 * 60 * 60 * 1000);
			var defaultDate = date.getUTCFullYear() + "-" + (date.getUTCMonth() + 1) + "-" + date.getUTCDate();
			document.getElementById("datetimepicker-dashboard").flatpickr({
				inline: true,
				prevArrow: "<span title=\"Previous month\">&laquo;</span>",
				nextArrow: "<span title=\"Next month\">&raquo;</span>",
				defaultDate: defaultDate
			});
		});
	</script>

</body>

</html>