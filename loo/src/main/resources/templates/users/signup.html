<!DOCTYPE html>
<html lang="ko">
<head th:replace="head :: head"></head>
<head>
   <title>회원가입</title>
</head>

<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
	<script>
		function formCheck(){
			let password = $("#password");
			
			if(password.val().length < 4 || password.val().length > 20){
				alert("패스워드는 4자리 이상입니다.");
				password.focus();
				return false;
			}
			
			let member_mail = $("#member_mail");
			
			if(member_mail.val()==""){
				alert("이메일을 입력하세요.");
				member_mail.focus();
				return false;
			}
			
			let member_name = $("#member_name");
			
			if(member_name.val()==""){
				alert("이름을 입력하세요.");
				email.focus();
				return false;
			}
			
			
			let phone = $("#phone");
			
			if(phone.val()==""){
				alert("연락처를 입력하세요.");
				phone.focus();
				return false;
			}
			
			
			let now = new Date();
			let birthday = new Date(birthday.val());
			
			if(now < birthday){
				alert("생년월일을 오늘 이전이어야 합니다.");
				birthday.focus();
				return false;
			}
			
			let company_id = $("#company_id");
			
			if(company_id.val()==""){
				alert("회사를 선택하세요.");
				company_id.focus();
				return false;
			}
			
			let department_id = $("#department_id");
			
			if(department_id.val()==""){
				alert("부서를 선택하세요.");
				department_id.focus();
				return false;
			}
		
			let position_id = $("#position_id");
			
			if(position_id.val()==""){
				alert("직책를 선택하세요.");
				position_id.focus();
				return false;
			}
			
			return true;
		}
	</script>
	
	
	
   <main class="d-flex w-100">
      <div class="container d-flex flex-column">
         <div class="row vh-100">
            <div class="col-sm-10 col-md-8 col-lg-6 col-xl-5 mx-auto d-table h-100">
               <div class="d-table-cell align-middle">

                  <div class="text-center mt-4">
                     <h1 class="h2">회원가입</h1>
                     <p class="lead">
                        LOO 회원가입 페이지 입니다
                     </p>
                  </div>

                  <div class="card">
                     <div class="card-body">
                        <div class="m-sm-3">
                           <form action="signup" method="post" th:object="${member}" onsubmit="return formCheck()">
                              <div class="mb-3">
                                 <label class="form-label">아이디(Email)</label>
                                 <input class="form-control form-control-lg" type="email" th:field="*{member_mail}" placeholder="회사 이메일을 입력해주세요."/>
                                 <div class="text-danger" th:errors="*{member_mail}"></div>
                              </div>
                              <div th:if="${#fields.hasGlobalErrors()}">
							  	  <p class="text-danger" th:each="err : ${#fields.globalErrors}" th:text="${err}">
							  </div>
                              <div class="mb-3">
                                 <label class="form-label">비밀번호</label>
                                 <input class="form-control form-control-lg" type="password" th:field="*{password}" placeholder="비밀번호를 입력해주세요." />
                                 <div class="text-danger" th:errors="*{password}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">이름</label>
                                 <input class="form-control form-control-lg" type="text" th:field="*{member_name}" placeholder="이름을 입력해주세요." />
                                 <div class="text-danger" th:errors="*{member_name}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">전화번호</label>
                                 <input class="form-control form-control-lg" type="text" th:field="*{phone}" placeholder="연락처를 입력해주세요." />
                                 <div class="text-danger" th:errors="*{phone}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">생년월일</label>
                                 <input class="form-control form-control-lg" type="date" th:field="*{birthday}"/>
                                 <div class="text-danger" th:errors="*{birthday}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">입사일</label>
                                 <input class="form-control form-control-lg" type="date" th:field="*{hire_date}"/>
                                 <div class="text-danger" th:errors="*{hire_date}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">회사명</label>
                          		 <select class="form-select mb-3" th:field="*{company_id}" th:value="${company_id}">
                               		<option th:value="''" selected>회사를 선택해주세요.</option>
                               		<option th:value="'C001'">LOO</option>
                             	</select>
                             	<div class="text-danger" th:errors="*{company_id}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">부서 정보</label>
                                 <select class="form-select mb-3" th:field="*{department_id}" th:value="${department_id}">
                                        <option th:value="''" selected>부서를 선택해주세요.</option>
                                        <option th:value="${'C001-D'}">개발팀</option>
                                        <option th:value="${'C001-P'}">인사팀</option>
                                        <option th:value="${'C001-F'}">총무팀</option>
                                      </select>
	                             <div class="text-danger" th:errors="*{department_id}"></div>
                              </div>
                              <div class="mb-3">
                                 <label class="form-label">직책</label>
                                 <select class="form-select mb-3" th:field="*{position_id}" th:value="${position_id}">
	                               <option th:value="''" selected>직책을 선택해주세요.</option>
	                               <option th:value="${'employee'}">사원</option>
	                               <option th:value="${'manager'}">매니저</option>
	                             </select>
	                             <div class="text-danger" th:errors="*{position_id}"></div>
                              </div>
                              <div class="d-grid gap-2 mt-3">
                                 <input type="submit" value="회원가입" class="btn btn-lg btn-primary">
                              </div>
                           </form>
                        </div>
                     </div>
                  </div>
                  <div class="text-center mb-3">
                     이미 사원계정이 있습니까? <a href="/users/login">로그인</a>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </main>

   <script src="js/app.js"></script>

</body>

</html>